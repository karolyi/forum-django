{% load i18n humanize %}
<div class="card topic-group-wrapper topic-type-{{ topic_type }}">
    <div class="card-header">
        <h4 class="card-title">
            {% if topic_type == 'highlighted' %}
                {% trans 'Highlighted topics' %}
            {% elif topic_type == 'normal' %}
                {% trans 'Normal topics' %}
            {% elif topic_type == 'archived' %}
                {% trans 'Archived topics' %}
            {% endif %}
        </h4>
    </div>
    <div class="card-block">
        <div class="card-text">
            <div class="row topic-header-row">
                <div class="col-xs-6 col-sm-6">
                    {% trans 'Topic' %}
                </div>
                <div class="col-xs-6 col-sm-2 text-center">
                    {% trans 'Last commented at' %}
                </div>
                <div class="clearfix visible-xs-block"></div>
                <div class="col-xs-6 col-sm-2 text-center">
                    {% trans 'Last commented by' %}
                </div>
                <div class="col-xs-6 col-sm-2 text-center">
                    {% trans 'Total comments' %}
                </div>
            </div>
            <section class="topic-list-wrapper">
                {% include 'default/base/include/topic-group-page.html' with topic_list=topic_list %}
            </section>
            <section class="pagination-wrapper text-center">
            {% include 'default/include/paginator-generic.html' with page=topic_list %}
            </section>
            {% if not topic_list.paginator.num_pages and topic_type == 'archived' %}
            <section class="loader-topics-archived-wrapper text-center">
                <button class="loader-topics-archived btn btn-primary">
                    <span class="fa fa-arrow-circle-o-down" aria-hidden="true"></span>
                    {% trans 'Load archived topics' %}
                </button>
            </section>
            {% endif %}
        </div>
    </div>
</div>
<script type="text/javascript">
    Forum.topicGroup.add({
        topicType: '{{ topic_type|escapejs }}',
        urls: {
            topicListPage: '{% url 'rest-api:v1-topic-list-page' %}'
            {% if not topic_list.paginator.num_pages and topic_type == 'archived' %}
            , archivedTopicsStart: '{% url 'rest-api:v1-archived-topics-start' %}'
            {% endif %}
        },
        selectors: {
            root: '.topic-group-wrapper.topic-type-{{ topic_type }}',
            username: '.topic-list-item-row .username',
            paginationWrapper: '.pagination-wrapper',
            paginator: 'ul.pagination',
            topicListWrapper: '.topic-list-wrapper'
            {% if not topic_list.paginator.num_pages and topic_type == 'archived' %}
            , loaderTopicsArchivedWrapper: '.loader-topics-archived-wrapper'
            , buttonTopicsArchivedLoad: '.loader-topics-archived'
            {% endif %}
        },
        pageMax: {{ topic_list.paginator.num_pages|default:0 }},
    });
</script>
